<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:5,&quot;tests&quot;:27,&quot;passes&quot;:27,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-05-30T05:48:16.426Z&quot;,&quot;end&quot;:&quot;2025-05-30T05:48:16.526Z&quot;,&quot;duration&quot;:100,&quot;testsRegistered&quot;:27,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8cbd3759-8ef8-48a6-ba4a-f171c4070768&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;title&quot;:&quot;validateExportRequest Middleware&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\test\\middleware\\validateExportData.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\middleware\\validateExportData.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should call next() for valid input&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should call next() for valid input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    expenses: [{ desc: \&quot;Lunch\&quot;, amount: 10, category: \&quot;Needs\&quot;, date: \&quot;2023-01-01\&quot; }],\n    summary: {\n      salary: 5000,\n      needs: 2000,\n      wants: 1000,\n      savings: 2000,\n      total: 5000,\n      remaining: 1000,\n    },\n  },\n  query: { type: \&quot;pdf\&quot; },\n};\nconst res = {\n  status: () =&gt; res,\n  json: () =&gt; { },\n  setHeader: () =&gt; { },\n};\nconst next = () =&gt; done();\nvalidateExportRequest(req, res, next);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3813db8-09d0-4ec9-8fe2-2c0e8b92e425&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for invalid body (missing expenses)&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should return 400 for invalid body (missing expenses)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: { summary: {} }, // Missing expenses\n  query: { type: \&quot;pdf\&quot; },\n};\nconst res = {\n  status: sinon.stub().returnsThis(),\n  json: sinon.stub().callsFake((payload) =&gt; {\n    expect(res.status.calledWith(400)).to.be.true;\n    expect(payload).to.have.property(\&quot;error\&quot;);\n    done();\n  }),\n};\nvalidateExportRequest(req, res, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c807bca1-79ce-4c29-b80c-a9fe924f884b&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for invalid query (unsupported type)&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should return 400 for invalid query (unsupported type)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    expenses: [{ desc: \&quot;Lunch\&quot;, amount: 10, category: \&quot;Needs\&quot;, date: \&quot;2023-01-01\&quot; }],\n    summary: {\n      salary: 5000,\n      needs: 2000,\n      wants: 1000,\n      savings: 2000,\n      total: 5000,\n      remaining: 1000,\n    },\n  },\n  query: { type: \&quot;csv\&quot; }, // Invalid type\n};\nconst res = {\n  status: sinon.stub().returnsThis(),\n  json: sinon.stub().callsFake((payload) =&gt; {\n    expect(res.status.calledWith(400)).to.be.true;\n    expect(payload).to.have.property(\&quot;error\&quot;);\n    done();\n  }),\n};\nvalidateExportRequest(req, res, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ef80c49-b6a9-43be-a4b4-9fab7f71734f&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for missing summary&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should return 400 for missing summary&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    expenses: [{ desc: \&quot;Lunch\&quot;, amount: 10, category: \&quot;Needs\&quot;, date: \&quot;2023-01-01\&quot; }],\n  },\n  query: { type: \&quot;pdf\&quot; },\n};\nconst res = {\n  status: sinon.stub().returnsThis(),\n  json: sinon.stub().callsFake((payload) =&gt; {\n    expect(res.status.calledWith(400)).to.be.true;\n    expect(payload).to.have.property(\&quot;error\&quot;);\n    done();\n  }),\n};\nvalidateExportRequest(req, res, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36095779-58ab-4148-936b-b7630d1d292a&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for empty expenses array&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should return 400 for empty expenses array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {\n    expenses: [], // Invalid: empty array\n    summary: {\n      salary: 5000,\n      needs: 2000,\n      wants: 1000,\n      savings: 2000,\n      total: 5000,\n      remaining: 1000,\n    },\n  },\n  query: { type: \&quot;excel\&quot; },\n};\nconst res = {\n  status: sinon.stub().returnsThis(),\n  json: sinon.stub().callsFake((payload) =&gt; {\n    expect(res.status.calledWith(400)).to.be.true;\n    expect(payload).to.have.property(\&quot;error\&quot;);\n    done();\n  }),\n};\nvalidateExportRequest(req, res, () =&gt; { });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2464840-df07-4e00-a089-387d5fc2a54a&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 with fallback error message if error.errors is missing&quot;,&quot;fullTitle&quot;:&quot;validateExportRequest Middleware should return 400 with fallback error message if error.errors is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = {\n  body: {},\n  query: {},\n};\nconst res = {\n  status: sinon.stub().returnsThis(),\n  json: sinon.stub(),\n  setHeader: sinon.stub(),\n};\nconst next = sinon.stub();\n// Stub the parse method to throw an error with no `errors` property\nconst originalParse = validationSchemas.exportRequestSchema.parse;\nvalidationSchemas.exportRequestSchema.parse = () =&gt; {\n  const err = new Error(\&quot;Some unknown error\&quot;);\n  throw err; // no err.errors property\n};\nvalidateExportRequest(req, res, next);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWithMatch({ error: \&quot;Invalid input data\&quot; })).to.be.true;\nexpect(next.called).to.be.false;\n// Restore the original method\nvalidationSchemas.exportRequestSchema.parse = originalParse;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ff2a6d6-0acd-4a8f-b206-2da4eac0a8cb&quot;,&quot;parentUUID&quot;:&quot;185e9923-4386-4709-b512-e29f845d870e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3813db8-09d0-4ec9-8fe2-2c0e8b92e425&quot;,&quot;c807bca1-79ce-4c29-b80c-a9fe924f884b&quot;,&quot;3ef80c49-b6a9-43be-a4b4-9fab7f71734f&quot;,&quot;36095779-58ab-4148-936b-b7630d1d292a&quot;,&quot;d2464840-df07-4e00-a089-387d5fc2a54a&quot;,&quot;8ff2a6d6-0acd-4a8f-b206-2da4eac0a8cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;52801dc9-3fa4-4a5b-b683-9c99cbbabf3d&quot;,&quot;title&quot;:&quot;createExcelWorkbook&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\test\\utils\\fileGenerators\\generateFiles.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\utils\\fileGenerators\\generateFiles.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a valid Excel workbook buffer for normal input&quot;,&quot;fullTitle&quot;:&quot;createExcelWorkbook should create a valid Excel workbook buffer for normal input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const summary = { total: 1000, count: 5 };\nconst expenses = [\n  { id: 1, item: &#x27;Coffee&#x27;, amount: 5 },\n  { id: 2, item: &#x27;Book&#x27;, amount: 20 },\n];\nconst buffer = createExcelWorkbook(summary, expenses);\nexpect(Buffer.isBuffer(buffer)).to.be.true;\n// Check buffer is valid Excel by reading back sheets\nconst workbook = XLSX.read(buffer);\nexpect(workbook.SheetNames).to.include.members([&#x27;Expenses&#x27;, &#x27;Summary&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2275b097-c15a-446f-a5e1-60f76ecd3544&quot;,&quot;parentUUID&quot;:&quot;52801dc9-3fa4-4a5b-b683-9c99cbbabf3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle empty expenses and empty summary gracefully&quot;,&quot;fullTitle&quot;:&quot;createExcelWorkbook should handle empty expenses and empty summary gracefully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const summary = {};\nconst expenses = [];\nconst buffer = createExcelWorkbook(summary, expenses);\nexpect(Buffer.isBuffer(buffer)).to.be.true;\nconst workbook = XLSX.read(buffer);\nexpect(workbook.SheetNames).to.include.members([&#x27;Expenses&#x27;, &#x27;Summary&#x27;]);\n// Summary sheet data should include keys with 0 values\nconst summarySheet = workbook.Sheets[&#x27;Summary&#x27;];\nconst summaryData = XLSX.utils.sheet_to_json(summarySheet, { header: 1 });\nexpect(summaryData.length).to.equal(0); // no summary entries&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e698ea34-c8f8-4a1a-931f-9c8de5a349bb&quot;,&quot;parentUUID&quot;:&quot;52801dc9-3fa4-4a5b-b683-9c99cbbabf3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should default null/undefined summary values to 0&quot;,&quot;fullTitle&quot;:&quot;createExcelWorkbook should default null/undefined summary values to 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const summary = { total: null, count: undefined };\nconst expenses = [{ id: 1, item: &#x27;Test&#x27;, amount: 10 }];\nconst buffer = createExcelWorkbook(summary, expenses);\nexpect(Buffer.isBuffer(buffer)).to.be.true;\nconst workbook = XLSX.read(buffer);\nconst summarySheet = workbook.Sheets[&#x27;Summary&#x27;];\nconst summaryData = XLSX.utils.sheet_to_json(summarySheet, { header: 1 });\n// Summary sheet rows have 0 for null/undefined values\nexpect(summaryData).to.deep.include([&#x27;total&#x27;, 0]);\nexpect(summaryData).to.deep.include([&#x27;count&#x27;, 0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7334f594-fc7c-468d-90d1-e48e2c79da7f&quot;,&quot;parentUUID&quot;:&quot;52801dc9-3fa4-4a5b-b683-9c99cbbabf3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2275b097-c15a-446f-a5e1-60f76ecd3544&quot;,&quot;e698ea34-c8f8-4a1a-931f-9c8de5a349bb&quot;,&quot;7334f594-fc7c-468d-90d1-e48e2c79da7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;title&quot;:&quot;sendResponse&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\test\\utils\\helpers\\responseHelpers.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\utils\\helpers\\responseHelpers.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;sendResponse\&quot;&quot;,&quot;fullTitle&quot;:&quot;sendResponse \&quot;before each\&quot; hook in \&quot;sendResponse\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;res = {\n  statusCode: null,\n  headers: {},\n  body: null,\n  status(code) {\n    this.statusCode = code;\n    return this;\n  },\n  setHeader(key, value) {\n    this.headers[key] = value;\n  },\n  json(payload) {\n    this.body = payload;\n  },\n  send(payload) {\n    this.body = payload;\n  },\n  redirect(status, url) {\n    this.statusCode = status;\n    this.body = `redirect:${url}`;\n  }\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ba5eb56-af12-4f2d-a3c7-f05c65d61eef&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set custom headers&quot;,&quot;fullTitle&quot;:&quot;sendResponse should set custom headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 200, data: { message: &#x27;ok&#x27; }, headers: { &#x27;X-Test&#x27;: &#x27;test-value&#x27; } });\nexpect(res.headers).to.have.property(&#x27;X-Test&#x27;, &#x27;test-value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19be772c-2394-4345-8ce2-bf688f779a02&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle 1xx informational response with data&quot;,&quot;fullTitle&quot;:&quot;sendResponse should handle 1xx informational response with data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 100, data: &#x27;info data&#x27; });\nexpect(res.statusCode).to.equal(100);\nexpect(res.body).to.deep.equal({ info: &#x27;info data&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f5203ff-4e08-4567-b708-c82c04dcddd4&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle 1xx informational response with no data&quot;,&quot;fullTitle&quot;:&quot;sendResponse should handle 1xx informational response with no data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 101 });\nexpect(res.statusCode).to.equal(101);\nexpect(res.body).to.deep.equal({ info: &#x27;Informational response&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dd50083-e275-472d-a6e9-655aa52b33fd&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send buffer data for 2xx status&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send buffer data for 2xx status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const buffer = Buffer.from(&#x27;test buffer&#x27;);\nsendResponse(res, { status: 200, data: buffer });\nexpect(res.statusCode).to.equal(200);\nexpect(res.body).to.equal(buffer);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0238434a-348f-45a2-a617-c94155b245b5&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send JSON data for 2xx status with non-buffer data&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send JSON data for 2xx status with non-buffer data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 200, data: { success: true } });\nexpect(res.statusCode).to.equal(200);\nexpect(res.body).to.deep.equal({ data: { success: true } });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8c60326-f1b7-459e-9f9f-f0b6b69bf05a&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should redirect for 3xx status with provided location&quot;,&quot;fullTitle&quot;:&quot;sendResponse should redirect for 3xx status with provided location&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 302, data: &#x27;/new-location&#x27; });\nexpect(res.statusCode).to.equal(302);\nexpect(res.body).to.equal(&#x27;redirect:/new-location&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1e2cbb9-303d-4a42-bedf-be0fdf4b588e&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should redirect for 3xx status with default location \&quot;/\&quot;&quot;,&quot;fullTitle&quot;:&quot;sendResponse should redirect for 3xx status with default location \&quot;/\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 301 });\nexpect(res.statusCode).to.equal(301);\nexpect(res.body).to.equal(&#x27;redirect:/&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e04c395d-fc92-443e-8a43-faa6a8809c3f&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send error JSON for 4xx status with provided error message&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send error JSON for 4xx status with provided error message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 400, error: &#x27;Bad request&#x27; });\nexpect(res.statusCode).to.equal(400);\nexpect(res.body).to.deep.equal({ error: &#x27;Bad request&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d93e9af2-9d34-4c5f-b337-150db7877a6c&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send default error JSON for 4xx status with no error message&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send default error JSON for 4xx status with no error message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 404 });\nexpect(res.statusCode).to.equal(404);\nexpect(res.body).to.deep.equal({ error: &#x27;Client error occurred&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;450d2a8a-62a0-46dc-a98c-bcb2da804f04&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send error JSON for 5xx status with provided error message&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send error JSON for 5xx status with provided error message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 500, error: &#x27;Server error&#x27; });\nexpect(res.statusCode).to.equal(500);\nexpect(res.body).to.deep.equal({ error: &#x27;Server error&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85f891a7-a6d6-4c8a-891e-1666712108d7&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send default error JSON for 5xx status with no error message&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send default error JSON for 5xx status with no error message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 503 });\nexpect(res.statusCode).to.equal(503);\nexpect(res.body).to.deep.equal({ error: &#x27;Internal server error&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01da2fcf-160c-4a7d-8555-918d3812c632&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should send 500 error JSON for unknown status series&quot;,&quot;fullTitle&quot;:&quot;sendResponse should send 500 error JSON for unknown status series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendResponse(res, { status: 700 });\nexpect(res.statusCode).to.equal(500);\nexpect(res.body).to.deep.equal({ error: &#x27;Unknown status code&#x27; });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ee99029-f6bf-4d08-923d-998ef5526ab8&quot;,&quot;parentUUID&quot;:&quot;810e1bd6-990d-4224-846a-1debf018f6e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19be772c-2394-4345-8ce2-bf688f779a02&quot;,&quot;1f5203ff-4e08-4567-b708-c82c04dcddd4&quot;,&quot;7dd50083-e275-472d-a6e9-655aa52b33fd&quot;,&quot;0238434a-348f-45a2-a617-c94155b245b5&quot;,&quot;f8c60326-f1b7-459e-9f9f-f0b6b69bf05a&quot;,&quot;b1e2cbb9-303d-4a42-bedf-be0fdf4b588e&quot;,&quot;e04c395d-fc92-443e-8a43-faa6a8809c3f&quot;,&quot;d93e9af2-9d34-4c5f-b337-150db7877a6c&quot;,&quot;450d2a8a-62a0-46dc-a98c-bcb2da804f04&quot;,&quot;85f891a7-a6d6-4c8a-891e-1666712108d7&quot;,&quot;01da2fcf-160c-4a7d-8555-918d3812c632&quot;,&quot;0ee99029-f6bf-4d08-923d-998ef5526ab8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f37e63db-48ca-47f8-8d93-7ed4a87c76ab&quot;,&quot;title&quot;:&quot;setFileHeaders&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\test\\utils\\helpers\\setFileHeaders.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\utils\\helpers\\setFileHeaders.test.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;setFileHeaders\&quot;&quot;,&quot;fullTitle&quot;:&quot;setFileHeaders \&quot;before each\&quot; hook in \&quot;setFileHeaders\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;res = { setHeader: sinon.spy() }; // spy to monitor calls&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d07513b0-a928-4d76-868b-6ee73fb290ff&quot;,&quot;parentUUID&quot;:&quot;f37e63db-48ca-47f8-8d93-7ed4a87c76ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sets headers for pdf type&quot;,&quot;fullTitle&quot;:&quot;setFileHeaders sets headers for pdf type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setFileHeaders(res, &#x27;pdf&#x27;, &#x27;report&#x27;);\nexpect(res.setHeader.calledWith(&#x27;Content-Type&#x27;, &#x27;application/pdf&#x27;)).to.be.true;\nexpect(res.setHeader.calledWith(&#x27;Content-Disposition&#x27;, &#x27;attachment; filename=\&quot;report.pdf\&quot;&#x27;)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc3824d8-0a93-40b7-b8eb-abf0b729f6eb&quot;,&quot;parentUUID&quot;:&quot;f37e63db-48ca-47f8-8d93-7ed4a87c76ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sets correct headers for excel type&quot;,&quot;fullTitle&quot;:&quot;setFileHeaders sets correct headers for excel type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;setFileHeaders(res, &#x27;excel&#x27;, &#x27;report&#x27;);\nexpect(res.setHeader.calledWith(&#x27;Content-Type&#x27;, &#x27;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#x27;)).to.be.true;\nexpect(res.setHeader.calledWith(&#x27;Content-Disposition&#x27;, &#x27;attachment; filename=\&quot;report.xlsx\&quot;&#x27;)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;790e907f-628b-4362-8a9b-7731c08b8dd8&quot;,&quot;parentUUID&quot;:&quot;f37e63db-48ca-47f8-8d93-7ed4a87c76ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws error for unsupported file type&quot;,&quot;fullTitle&quot;:&quot;setFileHeaders throws error for unsupported file type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(() =&gt; setFileHeaders(res, &#x27;csv&#x27;, &#x27;file&#x27;)).to.throw(&#x27;Invalid file type for headers&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b217777-15bf-42b7-992c-fe58ba126075&quot;,&quot;parentUUID&quot;:&quot;f37e63db-48ca-47f8-8d93-7ed4a87c76ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc3824d8-0a93-40b7-b8eb-abf0b729f6eb&quot;,&quot;790e907f-628b-4362-8a9b-7731c08b8dd8&quot;,&quot;7b217777-15bf-42b7-992c-fe58ba126075&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;66b3f063-dc55-4a7a-8272-764bc684a940&quot;,&quot;title&quot;:&quot;Validation Schemas&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\test\\utils\\validations\\validationSchemas.test.mjs&quot;,&quot;file&quot;:&quot;\\test\\utils\\validations\\validationSchemas.test.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;validates a correct export request body&quot;,&quot;fullTitle&quot;:&quot;Validation Schemas validates a correct export request body&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n  expenses: [{ desc: &#x27;item&#x27;, amount: 10, category: &#x27;Needs&#x27;, date: &#x27;2023-01-01&#x27; }],\n  summary: {\n    salary: 500,\n    needs: 100,\n    wants: 100,\n    savings: 100,\n    total: 300,\n    remaining: 200\n  }\n};\n// Should pass without throwing\nexpect(() =&gt; exportRequestSchema.parse(input)).to.not.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d139ae0-b01e-4eba-9f33-1252d4db8ba7&quot;,&quot;parentUUID&quot;:&quot;66b3f063-dc55-4a7a-8272-764bc684a940&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects export request with missing fields&quot;,&quot;fullTitle&quot;:&quot;Validation Schemas rejects export request with missing fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidInput = {\n  expenses: [{ amount: 10 }], // Missing desc, category, date\n  summary: { salary: 500 }, // Missing required keys\n};\nexpect(() =&gt; exportRequestSchema.parse(invalidInput)).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598e45c4-ed5c-4e14-8bc4-db691ab3e511&quot;,&quot;parentUUID&quot;:&quot;66b3f063-dc55-4a7a-8272-764bc684a940&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects invalid export query type&quot;,&quot;fullTitle&quot;:&quot;Validation Schemas rejects invalid export query type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// &#x27;csv&#x27; is not a valid type in the schema, should throw\nexpect(() =&gt; exportQuerySchema.parse({ type: &#x27;csv&#x27; })).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ed50fef-a02d-4c17-872b-ac74928d64cd&quot;,&quot;parentUUID&quot;:&quot;66b3f063-dc55-4a7a-8272-764bc684a940&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d139ae0-b01e-4eba-9f33-1252d4db8ba7&quot;,&quot;598e45c4-ed5c-4e14-8bc4-db691ab3e511&quot;,&quot;2ed50fef-a02d-4c17-872b-ac74928d64cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.5.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\Atharva.Jaiswal\\Desktop\\Tasks\\Task5\\expense-tracker\\backend\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>